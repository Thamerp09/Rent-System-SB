/* =================================
   1. إعدادات الثيم والمتغيرات (فخامة الأسود والذهبي)
   ================================= */
:root {
   --bg-main: #f4f7f6;
   --card-bg: #ffffff;
   --text-primary: #2c3e50;
   --text-secondary: #7f8c8d;
   --accent-color: #b49457;
   --border-color: #dee2e6;
   --hover-bg: #f1f3f5;
   --glow-color: rgba(180, 148, 87, 0.1);
   --primary-gold: #b49457;
   --success: #198754;
   --danger: #dc3545;
   --font-main: 'Cairo', sans-serif;
}

body.dark-mode {
   --bg-main: #000000;
   --card-bg: rgba(255, 255, 255, 0.05);
   --text-primary: #ffffff;
   --text-secondary: #888888;
   --border-color: rgba(255, 255, 255, 0.1);
   --hover-bg: rgba(255, 255, 255, 0.1);
   --glow-color: rgba(180, 148, 87, 0.06);
}

/* =================================
   2. التنسيق العام والخلفية
   ================================= */
* {
   box-sizing: border-box;
   margin: 0;
   padding: 0;
   -webkit-tap-highlight-color: transparent;
}

body {
   font-family: var(--font-main);
   background-color: var(--bg-main);
   color: var(--text-primary);
   transition: background-color 0.3s ease, color 0.3s ease;
   min-height: 100vh;
   position: relative;
   overflow-x: hidden;
}

body::before {
   content: "";
   position: fixed;
   top: 50%;
   left: 50%;
   transform: translate(-50%, -50%);
   width: 100vw;
   height: 100vh;
   background: radial-gradient(circle, var(--glow-color) 0%, transparent 70%);
   z-index: -1;
   pointer-events: none;
}

/* =================================
   3. عنوان الصفحة (تم إلغاء الكارد القبيح)
   ================================= */
.page-title-card {
   background: none !important;
   border: none !important;
   padding: 3rem 1rem 2rem 1rem !important;
   text-align: center;
   display: flex;
   flex-direction: column;
   align-items: center;
   justify-content: center;
}

.title-icon-wrapper {
   display: none;
   /* إخفاء الأيقونة العلوية لزيادة النضوج في التصميم */
}

.title-text h1 {
   font-size: 2.2rem;
   font-weight: 800;
   letter-spacing: -1px;
   margin-bottom: 8px;
   position: relative;
   display: inline-block;
}

.title-text h1::after {
   content: "";
   position: absolute;
   bottom: -10px;
   left: 20%;
   right: 20%;
   height: 2px;
   background: linear-gradient(to right, transparent, var(--primary-gold), transparent);
}

.title-text p {
   font-size: 0.9rem;
   color: var(--primary-gold);
   text-transform: uppercase;
   letter-spacing: 3px;
   font-weight: 600;
   margin-top: 15px;
}

/* =================================
   4. قسم الإحصائيات (تنسيق أنيق جداً في النص)
   ================================= */
.stats-grid.summary {
   display: flex;
   flex-wrap: wrap;
   justify-content: center;
   /* توسيط الكروت */
   gap: 1.5rem;
   margin-bottom: 4rem;
   width: 100%;
}

.stat-card {
   background-color: var(--card-bg);
   border: 1px solid var(--border-color);
   border-radius: 28px;
   padding: 2rem 1.5rem;
   width: 100%;
   max-width: 300px;
   /* حجم موحد للكروت */
   text-align: center;
   /* توزيعه بالنص */
   transition: 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
   backdrop-filter: blur(10px);
   display: flex;
   flex-direction: column;
   align-items: center;
}

.stat-card:hover {
   transform: translateY(-10px);
   border-color: var(--primary-gold);
   box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
}

.stat-card .card-icon {
   font-size: 1.2rem;
   width: 50px;
   height: 50px;
   background-color: rgba(180, 148, 87, 0.1);
   color: var(--primary-gold);
   border-radius: 50%;
   display: grid;
   place-items: center;
   margin-bottom: 1.2rem;
   border: 1px solid rgba(180, 148, 87, 0.2);
}

.stat-card h3 {
   font-size: 0.85rem;
   color: var(--text-secondary);
   font-weight: 600;
   letter-spacing: 0.5px;
   margin-bottom: 0.8rem;
}

.stat-card .stat-number {
   font-size: 1.7rem;
   font-weight: 800;
   color: var(--text-primary);
   font-feature-settings: 'tnum';
}

/* تمييز كرت النجاح والخطر بلمسة ناعمة */
.stat-card.success {
   border-top: 3px solid var(--success);
}

.stat-card.danger {
   border-top: 3px solid var(--danger);
}

/* =================================
   5. الهيدر (سطح المكتب)
   ================================= */
.desktop-header {
   display: none;
   background-color: var(--card-bg);
   backdrop-filter: blur(10px);
   border-bottom: 1px solid var(--border-color);
   padding: 0 2rem;
   position: sticky;
   top: 0;
   z-index: 1000;
   justify-content: space-between;
   align-items: center;
   height: 70px;
}

.app-brand {
   font-size: 1.3rem;
   font-weight: 800;
   text-decoration: none;
   color: var(--accent-color);
}

.desktop-nav .nav-link {
   text-decoration: none;
   color: var(--text-secondary);
   font-weight: 600;
   padding: 0.6rem 1.2rem;
}

.desktop-nav .nav-link.active {
   color: var(--accent-color);
   background-color: rgba(180, 148, 87, 0.1);
   border-radius: 10px;
}

/* =================================
   6. المحتوى الرئيسي والرسوم
   ================================= */
.main-content {
   max-width: 1100px;
   margin: 0 auto;
   padding: 0 1.2rem 120px 1.2rem;
}

.content-card {
   background-color: var(--card-bg);
   border: 1px solid var(--border-color);
   border-radius: 28px;
   padding: 2rem;
   margin-bottom: 1.5rem;
}

.chart-wrapper {
   position: relative;
   height: 320px;
   width: 100%;
}

.card-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding-bottom: 1rem;
   border-bottom: 1px solid var(--border-color);
   margin-bottom: 1.5rem;
}

.card-header h3 {
   font-size: 1.1rem;
   font-weight: 700;
   color: var(--primary-gold);
}

.data-list li {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: 1.2rem 0;
   border-bottom: 1px solid var(--border-color);
}

/* الحاوية: نرتب العناصر داخلها عمودياً (فوق بعض) */
.item-details {
   display: flex;
   flex-direction: column;
   /* هذا الأمر هو اللي يجبر التاريخ ينزل تحت الاسم */
   gap: 5px;
   /* مسافة صغيرة بين الاسم والتاريخ */
   justify-content: center;
}

/* تنسيق الاسم */
.item-title {
   font-weight: 700;
   font-size: 1rem;
   color: var(--text-primary);
   line-height: 1.2;
}

/* تنسيق التاريخ (السطر الثاني) */
.item-subtitle {
   display: block;
   /* نؤكد عليه إنه يأخذ سطر لحاله */
   font-size: 0.85rem;
   /* حجم خط أصغر شوية من الاسم */
   color: var(--text-secondary);
   /* لون رمادي */
   font-weight: 500;
}

/* =================================
   7. الشات بوت والـ FAB
   ================================= */
.chat-fab {
   position: fixed;
   bottom: 100px;
   right: 20px;
   width: 60px;
   height: 60px;
   background-color: var(--primary-gold);
   color: #000;
   border-radius: 50%;
   border: none;
   display: grid;
   place-items: center;
   font-size: 1.7rem;
   box-shadow: 0 10px 20px rgba(180, 148, 87, 0.3);
   z-index: 1001;
   transition: 0.3s;
}

.chat-widget {
   position: fixed;
   bottom: 20px;
   right: 20px;
   width: calc(100vw - 40px);
   max-width: 380px;
   height: 70vh;
   background-color: var(--card-bg);
   border: 1px solid var(--border-color);
   border-radius: 30px;
   z-index: 2000;
   display: flex;
   flex-direction: column;
   backdrop-filter: blur(15px);
   visibility: hidden;
   opacity: 0;
   transform: translateY(20px);
   transition: 0.3s ease-in-out;
}

.chat-widget.active {
   visibility: visible;
   opacity: 1;
   transform: translateY(0);
}

.chat-header {
   display: flex;
   justify-content: space-between;
   align-items: center;
   padding: 1.2rem;
   border-bottom: 1px solid var(--border-color);
}

.chat-close-btn {
   background: rgba(255, 255, 255, 0.05);
   border: 1px solid var(--border-color);
   color: var(--text-secondary);
   width: 30px;
   height: 30px;
   border-radius: 50%;
   cursor: pointer;
   display: grid;
   place-items: center;
}

.chat-messages {
   flex-grow: 1;
   padding: 1.2rem;
   overflow-y: auto;
   display: flex;
   flex-direction: column;
   gap: 1rem;
}

.message {
   max-width: 85%;
   padding: 0.8rem 1rem;
   border-radius: 18px;
   font-size: 0.9rem;
}

.message.assistant {
   background: var(--hover-bg);
   align-self: flex-start;
   border-bottom-left-radius: 2px;
}

.message.user {
   background: var(--primary-gold);
   color: #000;
   align-self: flex-end;
   border-bottom-right-radius: 2px;
   font-weight: 600;
}

.chat-form {
   padding: 1rem;
   border-top: 1px solid var(--border-color);
   display: flex;
   gap: 10px;
}

.chat-form input {
   flex-grow: 1;
   height: 45px;
   border-radius: 25px;
   border: 1px solid var(--border-color);
   background: rgba(255, 255, 255, 0.05);
   color: var(--text-primary);
   padding: 0 15px;
   outline: none;
}

.chat-form button {
   background: none;
   border: none;
   color: var(--primary-gold);
   font-size: 1.3rem;
   cursor: pointer;
}

/* =================================
   8. أزرار التحكم
   ================================= */
.theme-toggle-floating {
   position: fixed;
   top: 20px;
   left: 20px;
   z-index: 1001;
   width: 50px;
   height: 50px;
   border-radius: 50%;
   background: rgba(255, 255, 255, 0.05);
   border: 1px solid var(--accent-color);
   color: var(--accent-color);
   display: grid;
   place-items: center;
   cursor: pointer;
   transition: 0.3s;
}

/* =================================
   9. شريط التنقل السفلي المنسوخ (النسخة الأصلية)
   ================================= */
.mobile-bottom-nav {
   display: flex;
   position: fixed;
   bottom: 1rem;
   left: 50%;
   transform: translateX(-50%);
   width: calc(100% - 2rem);
   max-width: 400px;
   height: 64px;
   background-color: rgba(0, 0, 0, 0.75);
   backdrop-filter: blur(15px);
   border: 1px solid var(--border-color);
   justify-content: space-around;
   align-items: center;
   z-index: 1000;
   border-radius: 999px;
   padding: 0 0.5rem;
   box-shadow: 0 15px 30px rgba(0, 0, 0, 0.5);
}

body:not(.dark-mode) .mobile-bottom-nav {
   background-color: rgba(255, 255, 255, 0.85);
}

.mobile-bottom-nav .nav-item {
   display: flex;
   flex-direction: column;
   align-items: center;
   justify-content: center;
   gap: 0.2rem;
   text-decoration: none;
   color: var(--text-secondary);
   font-size: 0.7rem;
   font-weight: 600;
   width: 60px;
   height: 100%;
   border-radius: 16px;
   transition: 0.2s;
}

.mobile-bottom-nav .nav-item i {
   font-size: 1.3rem;
}

.mobile-bottom-nav .nav-item.active {
   color: var(--accent-color);
}

.nav-item.add-button {
   background-color: var(--accent-color);
   color: #000;
   width: 56px;
   height: 56px;
   border-radius: 50%;
   margin-top: -20px;
   display: grid;
   place-items: center;
   box-shadow: 0 4px 15px rgba(180, 148, 87, 0.3);
}

body:not(.dark-mode) .nav-item.add-button {
   color: #fff;
}

/* =================================
   10. Responsive
   ================================= */
@media (min-width: 769px) {
   .desktop-header {
      display: flex;
   }

   .mobile-bottom-nav {
      display: none;
   }

   .main-content {
      padding-top: 2rem;
   }

   .content-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
   }
}

@media (max-width: 600px) {
   .title-text h1 {
      font-size: 1.8rem;
   }

   .stat-card {
      max-width: 100%;
   }
}


/* تنسيق المحتوى داخل رسالة الشات */
.chat-message-content {
   line-height: 1.6;
   font-size: 14px;
}

/* تنسيق القوائم والنقاط */
.chat-message-content ul {
   padding-right: 20px;
   /* عشان العربي */
   margin: 10px 0;
}

/* تنسيق الخط العريض */
.chat-message-content strong {
   color: #2c3e50;
   /* لون مميز للكلمات المهمة */
   font-weight: 700;
}






/* تنسيق العنصر المتوقع */


/* تنسيق الشارة النصية */
.badge-projected {
    font-size: 0.7em;
    background-color: #ffc107;
    color: #000;
    padding: 2px 6px;
    border-radius: 4px;
    margin-right: 5px;
    vertical-align: middle;
}

/* لون النص للمبلغ المتوقع */
.text-warning {
    color: #d39e00 !important;
}